---
name: skill-improver
description: This skill should be used when the user asks to "apply skill improvements", "update skill from plan", "execute improvement plan", "fix skill issues", "implement skill recommendations", or mentions applying improvements from quality review reports. Reads improvement-plan-{name}.md files generated by skill-quality-reviewer and intelligently merges and executes the suggested changes to improve Claude Skills quality.
version: 0.1.0
---

# Skill Improver

## Overview

Execute improvement plans generated by `skill-quality-reviewer` to automatically update and fix issues in Claude Skills. Parse improvement plan files, group changes by file and priority, intelligently merge updates, and apply changes with verification and backup.

Use this skill to implement quality improvement recommendations from skill quality reviews.

## When to Use This Skill

**Invoke this skill when:**
- Applying improvements from an improvement plan
- Updating a skill based on quality review feedback
- Executing recommended fixes from `skill-quality-reviewer`
- Implementing structured improvements to skill documentation

**Trigger phrases:**
- "Apply improvements from improvement-plan-git-workflow.md"
- "Update my skill based on the quality report"
- "Execute the improvement plan for api-helper"
- "Fix the issues identified in quality review"

## Improvement Workflow

### Step 1: Load the Improvement Plan

Read the `improvement-plan-{skill-name}.md` file generated by `skill-quality-reviewer`.

**Locate the plan:**
```bash
# Plan is typically in current directory
ls improvement-plan-*.md

# Or specify full path
read /path/to/improvement-plan-my-skill.md
```

**Validate the plan:**
- File exists and is readable
- Contains priority sections (High/Medium/Low)
- Has structured improvement items
- Includes file paths and suggested changes

**Reference:** `references/plan-format.md` for detailed plan structure

### Step 2: Parse Improvement Items

Extract all improvement suggestions from the plan file.

**Identify priority sections:**
- High Priority Improvements
- Medium Priority Improvements
- Low Priority Improvements

**Extract from each item:**
- File path (e.g., `SKILL.md:line:line` or `references/file.md`)
- Dimension (Description Quality, Content Organization, etc.)
- Impact (+X points)
- Current content
- Suggested content
- Reason for change

**Build update queue:**
```
UpdateQueue = [
  { file, line, priority, current, suggested, impact },
  ...
]
```

### Step 3: Group Changes by File

Organize updates by target file for efficient processing.

**Grouping logic:**
```
by_file = {
  "SKILL.md": [change1, change2, ...],
  "references/guide.md": [change3, ...],
  "examples/demo.md": [change4, ...],
  ...
}
```

**Count changes per file:**
- Track total modifications per file
- Identify files with multiple updates
- Prioritize files with most high-priority changes

### Step 4: Detect and Resolve Conflicts

Check for conflicts when multiple changes affect the same content.

**Conflict scenarios:**
- Same line number with different suggestions
- Overlapping line ranges
- Conflicting edit operations

**Resolution strategy:**
1. High priority takes precedence over medium/low
2. If same priority, preserve first change
3. Flag conflicts for manual review
4. Document resolution in update report

### Step 5: Sort by Priority

Order changes by priority within each file.

**Priority order:**
1. High Priority (execute first)
2. Medium Priority (execute second)
3. Low Priority (execute last)

**Execution order by file:**
```
1. SKILL.md (High Priority changes)
2. references/guide.md (High Priority changes)
3. SKILL.md (Medium Priority changes)
4. examples/demo.md (Medium Priority changes, create new)
5. SKILL.md (Low Priority changes)
```

**Reference:** `references/merge-strategies.md` for detailed merge logic

### Step 6: Backup Original Files

Create backup of skill files before making changes.

**Backup location:**
```bash
~/.claude/skills/backup/{skill-name}-{timestamp}/
```

**Backup command:**
```bash
# Use backup script
~/.claude/skills/skill-improver/scripts/backup-skill.sh <skill-path>
```

**Backup includes:**
- SKILL.md
- All references/ files
- All examples/ files
- All scripts/ files
- Directory structure preserved

### Step 7: Execute Updates

Apply changes using Edit or Write tools.

**For existing content (Edit):**
- Use Edit tool with file_path, old_string, new_string
- Match exact current content
- Replace with suggested content
- Verify change was applied

**For new files (Write):**
- Use Write tool to create new file
- Write complete suggested content
- Verify file was created

**Update tracking:**
- Track successful updates
- Track failed updates
- Log any errors or issues

### Step 8: Verify Results

Validate that updates were applied correctly.

**Verification checks:**
1. YAML syntax valid (use `extract-yaml.sh` from skill-quality-reviewer)
2. All modified files exist and are valid
3. New files were created successfully
4. No unintended changes occurred
5. Skill structure remains intact

**Verification command:**
```bash
# Use verify script
~/.claude/skills/skill-improver/scripts/verify-update.sh <skill-path>
```

### Step 9: Generate Update Report

Create `update-report-{skill-name}-{timestamp}.md` documenting all changes.

**Report sections:**
1. Summary (files modified, files created, total changes)
2. Changes Applied (per-file breakdown)
3. Quality Improvement (before/after scores)
4. Verification Results (check status)
5. Backup Location

**Report template:**
```markdown
# Skill Update Report: {skill-name}

## Summary
- **Update Date**: {timestamp}
- **Improvement Plan**: improvement-plan-{skill-name}.md
- **Files Modified**: {count}
- **Files Created**: {count}
- **Total Changes Applied**: {count}

## Changes Applied

### SKILL.md
- ✅ Fixed description trigger phrases (line 10)
- ✅ Changed to imperative form (line 50)
...

## Quality Improvement

| Dimension | Before | After | Change |
|-----------|--------|-------|--------|
| Description Quality | 65/100 | 90/100 | +25 |
| ... | ... | ... | ... |
| **Overall** | **67/100** | **87/100** | **+20** |

## Verification Results
- ✅ YAML syntax valid
- ✅ All files updated successfully
...

## Backup
Original files backed up to: `~/.claude/skills/backup/{skill-name}-{timestamp}/`
```

## Supported Update Types

### YAML Frontmatter Updates

**Update name or description:**
```yaml
# Current
---
name: my-skill
description: A helpful skill for various tasks.
---

# Suggested
---
name: api-contract-manager
description: This skill should be used when the user asks to "validate API
contract", "check API compatibility", or "detect breaking changes".
---
```

### SKILL.md Content Updates

**Fix writing style (imperative form):**
```
# Current
You should create the file first.
You need to validate the input.

# Suggested
Create the file first.
Validate the input.
```

### References/ File Updates

**Add new section:**
```
## New Section

Content to be added...
```

### New File Creation

**Create new example file:**
```
# examples/demo.md

Complete example content...
```

## Priority Handling

### High Priority

Execute first. These typically address:
- Critical description issues
- Major writing style problems
- Missing structural elements
- Security-related concerns

### Medium Priority

Execute after High. These typically address:
- Content organization improvements
- Additional examples
- Documentation enhancements

### Low Priority

Execute last. These typically address:
- Minor clarifications
- Nice-to-have improvements
- Polish and refinement

## Merge Strategies

**Single file, multiple changes:**
1. Sort by line number (descending to avoid offset issues)
2. Group by priority (High → Medium → Low)
3. Apply changes in order
4. Verify after each change

**Multiple files:**
1. Process each file independently
2. Apply all High Priority changes to all files first
3. Then Medium Priority changes
4. Then Low Priority changes
5. Verify each file after all changes applied

**Reference:** `references/merge-strategies.md` for detailed strategies

## Error Handling

### Parse Errors

**Symptom:** Cannot read improvement plan

**Solutions:**
- Verify file exists and is readable
- Check file follows expected format
- Ensure proper markdown structure

### Conflict Errors

**Symptom:** Multiple changes to same content

**Solutions:**
- Apply highest priority change
- Flag conflict for manual review
- Document decision in report

### Edit Failures

**Symptom:** Cannot find current content to replace

**Solutions:**
- Verify current content matches exactly
- Check line numbers are correct
- File may have been modified externally
- Skip change and document in report

### Verification Failures

**Symptom:** Update broke skill structure

**Solutions:**
- Restore from backup
- Review conflicting changes
- Apply changes individually
- Skip problematic changes

## Additional Resources

### Reference Files

For detailed implementation guidance, consult:

- **`references/plan-format.md`** - Improvement plan file structure and format
- **`references/merge-strategies.md`** - Detailed merge algorithms and conflict resolution

### Scripts

- **`scripts/backup-skill.sh`** - Create backup of skill before updates
- **`scripts/verify-update.sh`** - Verify skill integrity after updates

### Related Skills

- **`skill-quality-reviewer`** - Generates improvement plans
- **`skill-development`** - Best practices for skill creation

## Usage Examples

**Example 1: Apply improvements to local skill**
```
User: "Apply improvements from improvement-plan-git-workflow.md"

[Claude executes the 9-step workflow:]
1. Reads improvement-plan-git-workflow.md
2. Parses all improvement items
3. Groups changes by file
4. Detects and resolves conflicts
5. Sorts by priority
6. Backs up git-workflow skill
7. Executes updates
8. Verifies results
9. Generates update-report-git-workflow-timestamp.md
```

**Example 2: Update skill from quality review**
```
User: "Update my api-helper skill based on quality report"

[Claude:]
1. Locates improvement-plan-api-helper.md
2. Applies all recommended changes
3. Verifies skill structure
4. Reports quality improvement: 72/100 → 91/100
```

**Example 3: Execute specific priority changes**
```
User: "Apply only high priority improvements to my-skill"

[Claude:]
1. Parses improvement plan
2. Filters for High Priority items only
3. Applies changes
4. Generates report with partial improvement
```

## Best Practices

### Before Applying Updates

1. **Review the improvement plan** - Understand what will change
2. **Verify backup location** - Ensure backups can be restored
3. **Check for manual changes** - Note any uncommitted local modifications
4. **Estimate impact** - Review expected quality improvement

### During Update Execution

1. **Process in priority order** - High → Medium → Low
2. **Verify after each file** - Check updates were applied correctly
3. **Log all changes** - Document what was modified
4. **Handle conflicts gracefully** - Flag for review if needed

### After Applying Updates

1. **Review the update report** - Confirm all changes were intended
2. **Test the skill** - Verify it still works correctly
3. **Compare scores** - Check quality improvement matches expectations
4. **Keep backup** - Retain backup until confident in changes

### When Issues Occur

1. **Stop immediately** - Don't continue with errors
2. **Restore from backup** - Revert to original state
3. **Review the plan** - Check for invalid suggestions
4. **Apply selectively** - Skip problematic changes
5. **Report issues** - Document what went wrong

## Integration with Skill Quality Reviewer

This skill works seamlessly with `skill-quality-reviewer`:

**Workflow:**
1. `skill-quality-reviewer` analyzes skill
2. Generates `improvement-plan-{name}.md`
3. `skill-improver` reads plan
4. Applies recommended changes
5. Generates `update-report-{name}-{timestamp}.md`

**Quality improvement cycle:**
```
Current Skill (67/100 D+)
    ↓ [skill-quality-reviewer]
Improvement Plan
    ↓ [skill-improver]
Improved Skill (87/100 B+)
    ↓ [skill-quality-reviewer]
Quality Report (validation)
```

**Iterate until desired quality level reached.**
