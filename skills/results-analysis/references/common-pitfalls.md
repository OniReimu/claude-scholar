# Common Pitfalls in ML/AI Results Analysis

实验结果分析中的常见错误和陷阱，以及如何避免它们。

## 统计分析错误

### 错误 1: Cherry-Picking（挑选最好结果）

**问题描述**: 只报告多次实验中最好的结果，隐藏其他运行的结果。

**为什么错误**:
- 违反科学诚信原则
- 夸大方法的实际性能
- 无法反映方法的稳定性
- 审稿人可能要求提供所有运行结果

**错误示例**:
```
运行了 10 次实验，选择准确率最高的一次报告：
"我们的方法达到 92.5% 的准确率"
```

**正确做法**:
```
报告所有运行的统计信息：
"我们的方法在 10 次运行中达到 89.3% ± 2.1% 的准确率（均值 ± 标准差）"
```

**如何避免**:
- 预先确定实验次数（至少 3-5 次）
- 报告所有运行的均值和标准差
- 使用固定的随机种子集合
- 在方法部分说明实验重复次数

### 错误 2: P-Hacking（数据挖掘找显著性）

**问题描述**: 尝试多种分析方法，直到找到显著的 p-value。

**为什么错误**:
- 增加假阳性率（Type I 错误）
- 违反统计检验的前提假设
- 结果不可重现
- 可能被审稿人识别并拒稿

**错误示例**:
```
1. 先用 t-test，p = 0.08（不显著）
2. 再用 Mann-Whitney U，p = 0.06（不显著）
3. 最后用 Wilcoxon，p = 0.04（显著！）
4. 只报告 Wilcoxon 结果
```

**正确做法**:
```
1. 预先确定使用的统计检验方法
2. 在方法部分说明选择理由
3. 报告所有尝试的检验结果
4. 使用多重比较校正（如 Bonferroni）
```

**如何避免**:
- 在实验前确定分析计划
- 记录所有尝试的分析方法
- 使用预注册（pre-registration）
- 报告所有检验结果，不只是显著的

### 错误 3: 混淆标准差和标准误

**问题描述**: 不明确说明使用的是标准差还是标准误，或者混用两者。

**为什么错误**:
- 标准误通常比标准差小，可能误导读者
- 审稿人会要求明确说明
- 影响结果的可解释性

**错误示例**:
```
"准确率为 85.3% ± 0.7%"
（没有说明是标准差还是标准误）
```

**正确做法**:
```
"准确率为 85.3% ± 2.1%（标准差，5 次运行）"
或
"准确率为 85.3% ± 0.7%（标准误，5 次运行）"
```

**如何避免**:
- 始终明确标注使用的是 SD 还是 SE
- 在图表 caption 中说明
- 在方法部分统一说明报告方式
- 理解两者的区别和使用场景

### 错误 4: 忽略多重比较问题

**问题描述**: 进行多次统计检验但不进行校正，导致假阳性率增加。

**为什么错误**:
- 多次检验增加 Type I 错误概率
- P(至少一次错误) = 1 - (1-α)^k
- 例如：10 次检验，α=0.05，P(错误) ≈ 40%

**错误示例**:
```
对比 5 个方法，进行 10 次两两比较（C(5,2) = 10）
每次使用 α = 0.05，不进行校正
声称找到 3 个显著差异
```

**正确做法**:
```
使用 Bonferroni 校正：α' = 0.05/10 = 0.005
或使用 ANOVA + 事后检验（Tukey HSD）
报告校正后的 p-values
```

**如何避免**:
- 使用 ANOVA 而不是多次 t-test
- 使用事后检验（Tukey, Bonferroni）
- 使用 FDR 控制（Benjamini-Hochberg）
- 在方法部分说明校正方法

### 错误 5: 只报告 p-value，不报告效应量

**问题描述**: 只关注统计显著性，忽略实际差异大小。

**为什么错误**:
- p-value 受样本量影响
- 大样本下微小差异也可能显著
- 无法判断差异的实际重要性

**错误示例**:
```
"方法 A 显著优于方法 B（p < 0.001）"
（没有说明差异大小）
```

**正确做法**:
```
"方法 A（85.3%）显著优于方法 B（84.1%），
p < 0.001，Cohen's d = 0.52（中等效应量）"
```

**如何避免**:
- 同时报告 p-value 和效应量
- 使用 Cohen's d（t-test）或 η²（ANOVA）
- 解释效应量的实际意义
- 在表格中包含效应量列

### 错误 6: 样本量过小

**问题描述**: 实验重复次数太少，结果不稳定。

**为什么错误**:
- 标准差/标准误估计不准确
- 统计检验功效（power）不足
- 结果可重现性差

**错误示例**:
```
"我们运行了 2 次实验，准确率为 85% 和 87%"
```

**正确做法**:
```
"我们运行了 5 次实验，准确率为 85.3% ± 2.1%"
（至少 3-5 次，高方差任务 10+ 次）
```

**如何避免**:
- 最少 3-5 次重复
- 高方差任务增加到 10+ 次
- 使用功效分析确定样本量
- 报告所有运行结果

### 错误 7: 不检查统计检验的假设条件

**问题描述**: 直接使用参数检验，不验证正态性和方差齐性。

**为什么错误**:
- 违反假设时结果不可靠
- 可能导致错误结论
- 审稿人会质疑结果有效性

**错误示例**:
```
直接使用 t-test，不检查：
- 数据是否正态分布
- 两组方差是否相等
```

**正确做法**:
```
1. 使用 Shapiro-Wilk 检验正态性
2. 使用 Levene 检验方差齐性
3. 如果不满足，使用 Welch's t-test 或非参数检验
4. 在论文中报告检验结果
```

**如何避免**:
- 始终进行预先检验
- 使用 Q-Q 图可视化检查
- 不满足假设时使用替代方法
- 在方法部分说明检验过程

## 可视化错误

### 错误 8: 使用非色盲友好配色

**问题描述**: 使用红绿组合等色盲人群无法区分的颜色。

**为什么错误**:
- 8% 的男性有色觉缺陷
- 审稿人可能是色盲
- 黑白打印时无法区分

**错误示例**:
```
使用红色和绿色表示两个方法
色盲读者无法区分
```

**正确做法**:
```
使用 Okabe-Ito 或 Paul Tol 配色方案
配合不同线型（实线、虚线、点线）
```

**如何避免**:
- 使用推荐的色盲友好配色
- 测试黑白打印效果
- 使用 Coblis 色盲模拟器检查
- 配合线型和标记形状

### 错误 9: Y 轴不从 0 开始（夸大差异）

**问题描述**: 截断 Y 轴使小差异看起来很大。

**为什么错误**:
- 视觉上误导读者
- 夸大方法的改进
- 审稿人会指出这一问题

**错误示例**:
```
柱状图 Y 轴从 80% 开始
使得 82% vs 85% 的差异看起来很大
```

**正确做法**:
```
Y 轴从 0% 开始
或在 caption 中明确说明截断原因
```

**如何避免**:
- 默认 Y 轴从 0 开始
- 如果必须截断，使用断裂符号
- 在 caption 中说明
- 考虑使用相对改进百分比

### 错误 10: 缺少误差条

**问题描述**: 只显示均值，不显示变异性。

**为什么错误**:
- 无法判断结果的稳定性
- 无法评估差异的显著性
- 审稿人会要求添加

**错误示例**:
```
柱状图只显示均值
没有误差条
```

**正确做法**:
```
添加误差条（标准差或标准误）
在 caption 中说明误差类型
```

**如何避免**:
- 所有对比图都包含误差条
- 折线图使用误差带（阴影区域）
- 明确标注误差类型
- 报告实验重复次数

### 错误 11: 图表过于复杂

**问题描述**: 一张图包含过多信息，难以理解。

**为什么错误**:
- 读者无法快速理解
- 关键信息被淹没
- 影响论文可读性

**错误示例**:
```
一张图包含 10+ 条曲线
多个 Y 轴
过多的图例项
```

**正确做法**:
```
拆分为多张图
每张图聚焦一个主要观察
使用子图组织相关内容
```

**如何避免**:
- 每张图最多 5-7 条曲线
- 使用子图而不是单一复杂图
- 突出最重要的对比
- 次要结果放到 appendix

### 错误 12: 使用位图格式

**问题描述**: 保存为 PNG/JPG 而不是矢量图。

**为什么错误**:
- 缩放时失真
- 文件大小大
- 不符合出版标准

**错误示例**:
```
保存为 PNG 格式
分辨率 72 DPI
```

**正确做法**:
```
保存为 PDF 或 EPS 格式
使用矢量图
```

**如何避免**:
- 使用 matplotlib 的 savefig('fig.pdf')
- 设置 bbox_inches='tight'
- 检查输出文件格式
- 照片使用高分辨率 PNG（≥600 DPI）

## 写作错误

### 错误 13: 过度解读结果

**问题描述**: 从有限的实验得出过于宽泛的结论。

**为什么错误**:
- 超出数据支持的范围
- 审稿人会质疑
- 影响论文可信度

**错误示例**:
```
"这证明了我们的方法是最好的"
（只在 3 个数据集上测试）
```

**正确做法**:
```
"在我们测试的三个数据集上，我们的方法优于所有基线方法"
```

**如何避免**:
- 限定结论的适用范围
- 使用"在...上"等限定词
- 承认局限性
- 避免绝对化表述

### 错误 14: 隐藏负面结果

**问题描述**: 只报告成功的实验，隐藏失败的尝试。

**为什么错误**:
- 违反科学诚信
- 审稿人可能要求补充实验
- 影响结果的完整性

**错误示例**:
```
尝试了 5 种方法，只报告最好的 2 种
```

**正确做法**:
```
报告所有尝试的方法
失败的尝试可以放在 appendix
说明为什么某些方法不work
```

**如何避免**:
- 诚实报告所有实验
- 在 appendix 包含负面结果
- 分析失败原因
- 讨论局限性

### 错误 15: 缺少统计信息

**问题描述**: 只报告均值，不报告标准差、样本量等。

**为什么错误**:
- 无法评估结果可靠性
- 审稿人会要求补充
- 不符合报告标准

**错误示例**:
```
"我们的方法达到 85.3%"
（没有标准差、样本量、p-value）
```

**正确做法**:
```
"我们的方法达到 85.3% ± 2.1%（5 次运行的均值 ± 标准差），
显著优于基线方法的 82.1% ± 1.8%（t-test, p < 0.01）"
```

**如何避免**:
- 始终报告均值 ± 标准差/标准误
- 说明样本量（实验次数）
- 报告统计检验结果
- 包含 p-value 和效应量

### 错误 16: 不说明实验设置

**问题描述**: 缺少足够的实验细节，无法重现。

**为什么错误**:
- 结果不可重现
- 审稿人会要求补充
- 违反可重现性原则

**错误示例**:
```
"我们训练了一个模型"
（没有超参数、训练细节、硬件信息）
```

**正确做法**:
```
"我们使用 Adam 优化器（lr=1e-4）训练模型 100 epochs，
batch size 32，在 NVIDIA V100 GPU 上训练约 2 小时"
```

**如何避免**:
- 报告所有超参数
- 说明硬件配置
- 提供训练时间
- 说明随机种子设置

## 可重现性错误

### 错误 17: 不报告随机种子

**问题描述**: 没有说明使用的随机种子，结果无法重现。

**为什么错误**:
- 结果不可重现
- 审稿人会质疑
- 违反科学标准

**错误示例**:
```
"我们运行了 5 次实验"
（没有说明随机种子）
```

**正确做法**:
```
"我们使用随机种子 {42, 123, 456, 789, 1024} 运行了 5 次实验"
```

**如何避免**:
- 明确设置随机种子
- 在方法部分报告
- 提供代码时包含种子设置
- 使用固定的种子集合

### 错误 18: 不报告超参数搜索范围

**问题描述**: 只报告最终超参数，不说明搜索过程。

**为什么错误**:
- 无法判断是否过拟合到验证集
- 审稿人会质疑公平性
- 影响结果可信度

**错误示例**:
```
"我们使用 learning rate = 1e-4"
（没有说明搜索范围和方法）
```

**正确做法**:
```
"我们在验证集上搜索 learning rate ∈ {1e-5, 5e-5, 1e-4, 5e-4, 1e-3}，
选择性能最好的 1e-4"
```

**如何避免**:
- 报告搜索范围
- 说明搜索方法（grid/random/Bayesian）
- 使用独立的验证集
- 在 appendix 提供完整搜索结果

### 错误 19: 不报告计算资源

**问题描述**: 没有说明使用的硬件和训练时间。

**为什么错误**:
- 无法评估方法的实用性
- 审稿人会要求补充
- 影响方法的可复现性

**错误示例**:
```
"我们训练了模型"
（没有硬件和时间信息）
```

**正确做法**:
```
"我们在 4 块 NVIDIA V100 GPU 上训练模型，
总计约 48 GPU 小时"
```

**如何避免**:
- 报告 GPU/CPU 型号
- 说明训练时间
- 提供内存使用情况
- 在 appendix 包含详细配置

### 错误 20: 代码和数据不可获得

**问题描述**: 不提供代码和数据，无法验证结果。

**为什么错误**:
- 结果无法验证
- 审稿人会要求提供
- 违反开放科学原则

**错误示例**:
```
"代码将在接收后发布"
（实际上从未发布）
```

**正确做法**:
```
"代码和数据已在 https://github.com/xxx 公开"
或
"代码将在匿名审稿期间通过 https://anonymous.4open.science/ 提供"
```

**如何避免**:
- 提前准备代码仓库
- 使用匿名链接（审稿期间）
- 提供详细的 README
- 包含环境配置文件

## 检查清单

提交前检查：

### 统计分析
- [ ] 报告了所有实验运行的结果
- [ ] 明确标注了标准差或标准误
- [ ] 进行了适当的统计检验
- [ ] 多重比较进行了校正
- [ ] 报告了 p-value 和效应量
- [ ] 检查了统计检验的假设条件
- [ ] 样本量足够（至少 3-5 次）

### 可视化
- [ ] 使用了色盲友好配色
- [ ] 包含了误差条或误差带
- [ ] Y 轴范围合理（通常从 0 开始）
- [ ] 使用了矢量图格式（PDF/EPS）
- [ ] 图表清晰易读
- [ ] Caption 独立完整
- [ ] 测试了黑白打印效果

### 写作
- [ ] 结论限定在数据支持的范围内
- [ ] 报告了所有实验（包括负面结果）
- [ ] 提供了完整的统计信息
- [ ] 说明了实验设置和超参数
- [ ] 讨论了局限性
- [ ] 避免了过度解读

### 可重现性
- [ ] 报告了随机种子
- [ ] 说明了超参数搜索范围
- [ ] 提供了计算资源信息
- [ ] 代码和数据可获得
- [ ] 包含了环境配置信息
- [ ] 提供了详细的实验步骤

## 总结

避免这些常见错误的关键原则：

1. **诚实报告** - 不隐藏负面结果，不cherry-pick
2. **完整信息** - 统计量、误差、样本量、p-value、效应量
3. **预先计划** - 确定分析方法，避免 p-hacking
4. **检查假设** - 验证统计检验的前提条件
5. **清晰可视化** - 色盲友好、误差条、矢量图
6. **限定结论** - 不过度解读，承认局限性
7. **可重现性** - 随机种子、超参数、代码、数据

遵循这些原则可以避免大多数常见错误，提高论文质量和可信度。
